<!DOCTYPE html>
<html>
<head>
    <title>Story Gen</title>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="stylesheets/bootstrap/js/bootstrap.js"></script>
    <script src="javascripts/jplumb.js"></script>

    <style>
        /** ELEMENTS **/
        .chart-demo .window {
            border:0.1em dotted #d4e06b;
            width:14em; height:4em;
            line-height:4em;
            position: relative;
        }

        /** HOVER EFFECTS **/
        .chart-demo .window:hover, .chart-demo .window._jsPlumb_source_hover, .chart-demo .window._jsPlumb_target_hover {
            border:1px solid orange;
            color:orange;
        }

        /** ELEMENT POSITIONS **/
        #chartWindow1 { left:100px; top:0;}
        #chartWindow2 { left:20px;top:130px}
        #chartWindow3 { left:250px;top:130px}
        #chartWindow4 { left:20px;top:250px}



    </style>
</head>
<body>

<div class="container">
    <div class="col-md-12">
        <h1>Story Generator</h1>
    </div>

    {{>part}}


    {{>stories}}


</div>

<div id="chart">
    {{>chart}}
</div>






<div id="main">

    <div class="explanation">
        <h4>CHART</h4>
        <p>This is a simple demonstration of using jsPlumb to display hierarchical information.</p>
        <p>Connectors have a paintStyle of `gray` and specify an endpoint of radius 9.
            Each connection has an Arrow overlay indicating direction, and paints itself orange on mouse hover.
        </p>
        <p>The Bezier curve used in this demo has a 'curviness' of 50</p>
        <p>This demonstration uses jsPlumb 1.5.5, jQuery 1.9.0 and jQuery UI 1.9.2.For touch support, jQuery Touch Punch is used.</p>
    </div>
    <div class="demo chart-demo" id="chart-demo">
        <div class="window" id="chartWindow1">window one</div>
        <div class="window" id="chartWindow2">window two</div>
        <div class="window" id="chartWindow3">window three</div>
        <div class="window" id="chartWindow4">window four</div>

    </div>

</div>


</body>

<script>
    (function() {

        jsPlumb.ready(function() {

            var color = "gray";

            var instance = jsPlumb.getInstance({
                // notice the 'curviness' argument to this Bezier curve.  the curves on this page are far smoother
                // than the curves on the first demo, which use the default curviness value.
                Connector : [ "Bezier", { curviness:50 } ],
                DragOptions : { cursor: "pointer", zIndex:2000 },
                PaintStyle : { strokeStyle:color, lineWidth:2 },
                EndpointStyle : { radius:2, fillStyle:color },
                HoverPaintStyle : {strokeStyle:"#ec9f2e" },
                EndpointHoverStyle : {fillStyle:"#ec9f2e" },
                Container:"chart-demo"
            });

            // suspend drawing and initialise.
            instance.doWhileSuspended(function() {
                // declare some common values:
                var arrowCommon = { foldback:0.7, fillStyle:color, width:10 },
                // use three-arg spec to create two different arrows with the common values:
                        overlays = [
                            [ "Arrow", { location:0.5 }, arrowCommon ]
                        ];

                // add endpoints, giving them a UUID.
                // you DO NOT NEED to use this method. You can use your library's selector method.
                // the jsPlumb demos use it so that the code can be shared between all three libraries.
                var windows = jsPlumb.getSelector(".chart-demo .window");
                for (var i = 0; i < windows.length; i++) {
                    instance.addEndpoint(windows[i], {
                        uuid:windows[i].getAttribute("id") + "-bottom",
                        anchor:"Bottom",
                        maxConnections:-1
                    });
                    instance.addEndpoint(windows[i], {
                        uuid:windows[i].getAttribute("id") + "-top",
                        anchor:"Top",
                        maxConnections:-1
                    });
                }

//                instance.connect({uuids:["chartWindow3-bottom", "chartWindow6-top" ], overlays:overlays, detachable:true, reattach:true});
                instance.connect({uuids:["chartWindow1-bottom", "chartWindow2-top" ], overlays:overlays});
                instance.connect({uuids:["chartWindow1-bottom", "chartWindow3-top" ], overlays:overlays});
                instance.connect({uuids:["chartWindow3-bottom", "chartWindow4-top" ], overlays:overlays});
                instance.draggable(windows);

                setTimeout(function(){
                    instance.connect({uuids:["chartWindow1-bottom", "chartWindow4-top" ], overlays:overlays})
                }, 2000);
            });
        });

    })();
</script>
</html>